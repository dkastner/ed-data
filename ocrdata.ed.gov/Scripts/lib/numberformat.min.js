function NumberFormat(b,a){this.VERSION="Number Format v1.5.4";this.COMMA=",";this.PERIOD=".";this.DASH="-";this.LEFT_PAREN="(";this.RIGHT_PAREN=")";this.LEFT_OUTSIDE=0;this.LEFT_INSIDE=1;this.RIGHT_INSIDE=2;this.RIGHT_OUTSIDE=3;this.LEFT_DASH=0;this.RIGHT_DASH=1;this.PARENTHESIS=2;this.NO_ROUNDING=-1;this.num;this.numOriginal;this.hasSeparators=false;this.separatorValue;this.inputDecimalValue;this.decimalValue;this.negativeFormat;this.negativeRed;this.hasCurrency;this.currencyPosition;this.currencyValue;this.places;this.roundToPlaces;this.truncate;this.setNumber=setNumberNF;this.toUnformatted=toUnformattedNF;this.setInputDecimal=setInputDecimalNF;this.setSeparators=setSeparatorsNF;this.setCommas=setCommasNF;this.setNegativeFormat=setNegativeFormatNF;this.setNegativeRed=setNegativeRedNF;this.setCurrency=setCurrencyNF;this.setCurrencyPrefix=setCurrencyPrefixNF;this.setCurrencyValue=setCurrencyValueNF;this.setCurrencyPosition=setCurrencyPositionNF;this.setPlaces=setPlacesNF;this.toFormatted=toFormattedNF;this.toPercentage=toPercentageNF;this.getOriginal=getOriginalNF;this.moveDecimalRight=moveDecimalRightNF;this.moveDecimalLeft=moveDecimalLeftNF;this.getRounded=getRoundedNF;this.preserveZeros=preserveZerosNF;this.justNumber=justNumberNF;this.expandExponential=expandExponentialNF;this.getZeros=getZerosNF;this.moveDecimalAsString=moveDecimalAsStringNF;this.moveDecimal=moveDecimalNF;this.addSeparators=addSeparatorsNF;if(a==null)this.setNumber(b,this.PERIOD);else this.setNumber(b,a);this.setCommas(true);this.setNegativeFormat(this.LEFT_DASH);this.setNegativeRed(false);this.setCurrency(false);this.setCurrencyPrefix("$");this.setPlaces(2)}function setInputDecimalNF(a){this.inputDecimalValue=a}function setNumberNF(b,a){a!=null&&this.setInputDecimal(a);this.numOriginal=b;this.num=this.justNumber(b)}function toUnformattedNF(){return this.num}function getOriginalNF(){return this.numOriginal}function setNegativeFormatNF(a){this.negativeFormat=a}function setNegativeRedNF(a){this.negativeRed=a}function setSeparatorsNF(c,b,a){this.hasSeparators=c;if(b==null)b=this.COMMA;if(a==null)a=this.PERIOD;if(b==a)this.decimalValue=a==this.PERIOD?this.COMMA:this.PERIOD;else this.decimalValue=a;this.separatorValue=b}function setCommasNF(a){this.setSeparators(a,this.COMMA,this.PERIOD)}function setCurrencyNF(a){this.hasCurrency=a}function setCurrencyValueNF(a){this.currencyValue=a}function setCurrencyPrefixNF(a){this.setCurrencyValue(a);this.setCurrencyPosition(this.LEFT_OUTSIDE)}function setCurrencyPositionNF(a){this.currencyPosition=a}function setPlacesNF(a,b){this.roundToPlaces=!(a==this.NO_ROUNDING);this.truncate=b!=null&&b;this.places=a<0?0:a}function addSeparatorsNF(a,f,e,g){a+="";var b=a.indexOf(f),c="";if(b!=-1){c=e+a.substring(b+1,a.length);a=a.substring(0,b)}var d=/(\d+)(\d{3})/;while(d.test(a))a=a.replace(d,"$1"+g+"$2");return a+c}function toFormattedNF(){var n,b=this.num,a,m=new Array(2);if(this.roundToPlaces){b=this.getRounded(b);a=this.preserveZeros(Math.abs(b))}else a=this.expandExponential(Math.abs(b));if(this.hasSeparators)a=this.addSeparators(a,this.PERIOD,this.decimalValue,this.separatorValue);else a=a.replace(new RegExp("\\"+this.PERIOD),this.decimalValue);var i="",e="",j="",f="",g="",k="",h="",l="",c=this.negativeFormat==this.PARENTHESIS?this.LEFT_PAREN:this.DASH,d=this.negativeFormat==this.PARENTHESIS?this.RIGHT_PAREN:this.DASH;if(this.currencyPosition==this.LEFT_OUTSIDE){if(b<0){if(this.negativeFormat==this.LEFT_DASH||this.negativeFormat==this.PARENTHESIS)f=c;if(this.negativeFormat==this.RIGHT_DASH||this.negativeFormat==this.PARENTHESIS)g=d}if(this.hasCurrency)i=this.currencyValue}else if(this.currencyPosition==this.LEFT_INSIDE){if(b<0){if(this.negativeFormat==this.LEFT_DASH||this.negativeFormat==this.PARENTHESIS)e=c;if(this.negativeFormat==this.RIGHT_DASH||this.negativeFormat==this.PARENTHESIS)h=d}if(this.hasCurrency)j=this.currencyValue}else if(this.currencyPosition==this.RIGHT_INSIDE){if(b<0){if(this.negativeFormat==this.LEFT_DASH||this.negativeFormat==this.PARENTHESIS)e=c;if(this.negativeFormat==this.RIGHT_DASH||this.negativeFormat==this.PARENTHESIS)h=d}if(this.hasCurrency)k=this.currencyValue}else if(this.currencyPosition==this.RIGHT_OUTSIDE){if(b<0){if(this.negativeFormat==this.LEFT_DASH||this.negativeFormat==this.PARENTHESIS)f=c;if(this.negativeFormat==this.RIGHT_DASH||this.negativeFormat==this.PARENTHESIS)g=d}if(this.hasCurrency)l=this.currencyValue}a=i+e+j+f+a+g+k+h+l;if(this.negativeRed&&b<0)a='<font color="red">'+a+"</font>";return a}function toPercentageNF(){nNum=this.num*100;nNum=this.getRounded(nNum);return nNum+"%"}function getZerosNF(c){for(var a="",b=0;b<c;b++)a+="0";return a}function expandExponentialNF(d){if(isNaN(d))return d;var a=parseFloat(d)+"",c=a.toLowerCase().indexOf("e");if(c!=-1){var e=a.toLowerCase().indexOf("+"),f=a.toLowerCase().indexOf("-",c),b=a.substring(0,c);if(f!=-1){var g=a.substring(f+1,a.length);b=this.moveDecimalAsString(b,true,parseInt(g))}else{if(e==-1)e=c;var g=a.substring(e+1,a.length);b=this.moveDecimalAsString(b,false,parseInt(g))}a=b}return a}function moveDecimalRightNF(c,b){var a="";if(b==null)a=this.moveDecimal(c,false);else a=this.moveDecimal(c,false,b);return a}function moveDecimalLeftNF(c,b){var a="";if(b==null)a=this.moveDecimal(c,true);else a=this.moveDecimal(c,true,b);return a}function moveDecimalAsStringNF(g,i,h){var c=arguments.length<3?this.places:h;if(c<=0)return g;var a=g+"",d=this.getZeros(c),e=new RegExp("([0-9.]+)");if(i){a=a.replace(e,d+"$1");var f=new RegExp("(-?)([0-9]*)([0-9]{"+c+"})(\\.?)");a=a.replace(f,"$1$2.$3")}else{var b=e.exec(a);if(b!=null)a=a.substring(0,b.index)+b[1]+d+a.substring(b.index+b[0].length);var f=new RegExp("(-?)([0-9]*)(\\.?)([0-9]{"+c+"})");a=a.replace(f,"$1$2$4.")}a=a.replace(/\.$/,"");return a}function moveDecimalNF(d,c,b){var a="";if(b==null)a=this.moveDecimalAsString(d,c);else a=this.moveDecimalAsString(d,c,b);return parseFloat(a)}function getRoundedNF(a){a=this.moveDecimalRight(a);if(this.truncate)a=a>=0?Math.floor(a):Math.ceil(a);else a=Math.round(a);a=this.moveDecimalLeft(a);return a}function preserveZerosNF(a){var b;a=this.expandExponential(a);if(this.places<=0)return a;var c=a.indexOf(".");if(c==-1){a+=".";for(b=0;b<this.places;b++)a+="0"}else{var d=a.length-1-c,e=this.places-d;for(b=0;b<e;b++)a+="0"}return a}function justNumberNF(e){newVal=e+"";var b=false;if(newVal.indexOf("%")!=-1){newVal=newVal.replace(/\%/g,"");b=true}var f=new RegExp("[^\\"+this.inputDecimalValue+"\\d\\-\\+\\(\\)eE]","g");newVal=newVal.replace(f,"");var c=new RegExp("["+this.inputDecimalValue+"]","g"),a=c.exec(newVal);if(a!=null){var d=newVal.substring(a.index+a[0].length);newVal=newVal.substring(0,a.index)+this.PERIOD+d.replace(c,"")}if(newVal.charAt(newVal.length-1)==this.DASH){newVal=newVal.substring(0,newVal.length-1);newVal="-"+newVal}else if(newVal.charAt(0)==this.LEFT_PAREN&&newVal.charAt(newVal.length-1)==this.RIGHT_PAREN){newVal=newVal.substring(1,newVal.length-1);newVal="-"+newVal}newVal=parseFloat(newVal);if(!isFinite(newVal))newVal=0;if(b)newVal=this.moveDecimalLeft(newVal,2);return newVal}